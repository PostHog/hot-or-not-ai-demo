{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/landondepasquale/hot-or-not-leads/lib/leads.ts"],"sourcesContent":["import { readFileSync, writeFileSync } from 'fs';\nimport { join } from 'path';\nimport type { Lead, Rating, LeadWithRating } from './types';\n\nconst leadsPath = join(process.cwd(), 'lib/data/leads.json');\nconst ratingsPath = join(process.cwd(), 'lib/data/ratings.json');\n\nexport function getLeads(): Lead[] {\n  const data = readFileSync(leadsPath, 'utf-8');\n  return JSON.parse(data).leads;\n}\n\nexport function getLead(id: string): Lead | undefined {\n  const leads = getLeads();\n  return leads.find((lead) => lead.id === id);\n}\n\nexport function getRatings(): Record<string, Rating[]> {\n  try {\n    const data = readFileSync(ratingsPath, 'utf-8');\n    return JSON.parse(data).ratings || {};\n  } catch {\n    return {};\n  }\n}\n\nexport function saveRatings(ratings: Record<string, Rating[]>): void {\n  writeFileSync(ratingsPath, JSON.stringify({ ratings }, null, 2));\n}\n\nexport function addRating(leadId: string, userId: string, score: number): void {\n  const ratings = getRatings();\n\n  if (!ratings[leadId]) {\n    ratings[leadId] = [];\n  }\n\n  // Check if user already rated this lead\n  const existingIndex = ratings[leadId].findIndex((r) => r.userId === userId);\n\n  const newRating: Rating = {\n    userId,\n    leadId,\n    score,\n    ratedAt: new Date().toISOString(),\n  };\n\n  if (existingIndex >= 0) {\n    // Update existing rating\n    ratings[leadId][existingIndex] = newRating;\n  } else {\n    // Add new rating\n    ratings[leadId].push(newRating);\n  }\n\n  saveRatings(ratings);\n}\n\nexport function getLeadRatings(leadId: string): Rating[] {\n  const ratings = getRatings();\n  return ratings[leadId] || [];\n}\n\nexport function calculateAverageRating(leadId: string): { average: number | null; total: number } {\n  const ratings = getLeadRatings(leadId);\n\n  if (ratings.length === 0) {\n    return { average: null, total: 0 };\n  }\n\n  const sum = ratings.reduce((acc, r) => acc + r.score, 0);\n  return {\n    average: Math.round((sum / ratings.length) * 10) / 10,\n    total: ratings.length,\n  };\n}\n\nexport function getLeadsWithRatings(): LeadWithRating[] {\n  const leads = getLeads();\n\n  return leads.map((lead) => {\n    const { average, total } = calculateAverageRating(lead.id);\n    return {\n      ...lead,\n      averageRating: average,\n      totalRatings: total,\n    };\n  });\n}\n\nexport function getLeaderboard(): LeadWithRating[] {\n  const leadsWithRatings = getLeadsWithRatings();\n\n  // Sort by average rating (descending), then by total ratings (descending)\n  return leadsWithRatings\n    .filter((lead) => lead.averageRating !== null)\n    .sort((a, b) => {\n      if (b.averageRating !== a.averageRating) {\n        return (b.averageRating || 0) - (a.averageRating || 0);\n      }\n      return b.totalRatings - a.totalRatings;\n    });\n}\n\nexport function getRandomUnratedLead(userId: string, skipIds: string[] = []): Lead | null {\n  const leads = getLeads();\n  const ratings = getRatings();\n\n  // Get leads not rated by this user and not in skip list\n  const unratedLeads = leads.filter((lead) => {\n    const leadRatings = ratings[lead.id] || [];\n    const hasUserRated = leadRatings.some((r) => r.userId === userId);\n    const isSkipped = skipIds.includes(lead.id);\n    return !hasUserRated && !isSkipped;\n  });\n\n  if (unratedLeads.length === 0) {\n    // If all leads are rated or skipped, return a random lead not in skip list\n    const availableLeads = leads.filter((lead) => !skipIds.includes(lead.id));\n    if (availableLeads.length === 0) {\n      // If all leads are skipped, reset and return any random lead\n      return leads[Math.floor(Math.random() * leads.length)] || null;\n    }\n    return availableLeads[Math.floor(Math.random() * availableLeads.length)] || null;\n  }\n\n  // Return a random unrated lead\n  return unratedLeads[Math.floor(Math.random() * unratedLeads.length)] || null;\n}\n\nexport function hasUserRatedLead(userId: string, leadId: string): boolean {\n  const ratings = getRatings();\n  const leadRatings = ratings[leadId] || [];\n  return leadRatings.some((r) => r.userId === userId);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///Users/landondepasquale/hot-or-not-leads/app/api/leaderboard/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { getLeaderboard } from '@/lib/leads';\n\nexport async function GET() {\n  try {\n    const leaderboard = getLeaderboard();\n    return NextResponse.json({ leaderboard });\n  } catch {\n    return NextResponse.json({ error: 'Failed to fetch leaderboard' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,cAAc,IAAA,gIAAc;QAClC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAY;IACzC,EAAE,OAAM;QACN,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA8B,GAAG;YAAE,QAAQ;QAAI;IACnF;AACF","debugId":null}}]
}